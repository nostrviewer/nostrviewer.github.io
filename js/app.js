(()=>{var e;e=()=>{const e=(()=>{const e=new URL(window.location.href);return new URLSearchParams(e.search).get("tag")??"nostr"})(),s=new Set;["wss://nostr.wine","wss://at.nostrworks.com","wss://btc.klendazu.com","wss://knostr.neutrine.com","wss://nos.lol","wss://nostr.bitcoiner.social","wss://nostr.cercatrova.me","wss://nostr.corebreach.com","wss://no.str.cr","wss://nostr-dev.wellorder.net","wss://nostr.einundzwanzig.space","wss://nostr.mom","wss://nostr.noones.com","wss://nostr.oxtr.dev","wss://nostr-pub.wellorder.net","wss://nostr.sectiontwo.org","wss://nostr.semisol.dev","wss://nostr.swiss-enigma.ch","wss://nostr-verified.wellorder.net","wss://nostr.vulpem.com","wss://nostr.yael.at","wss://relay.damus.io","wss://relay.nostr.bg","wss://relay.snort.social","wss://nostr.mining.sc","wss://soloco.nl"].forEach((o=>{const n=new WebSocket(o);n.onopen=()=>{console.log("WebSocket opened: "+o);const s=["REQ",[...Array(16)].map((()=>Math.random().toString(36)[2])).join(""),{kinds:[1],"#t":[e],limit:50}];n.send(JSON.stringify(s)),console.log("Subscribed to events...")},n.onclose=()=>{console.log("Disconnected from relay.")},n.onerror=e=>{console.error("WebSocket error:",e)},n.onmessage=e=>{const o=JSON.parse(e.data);if("EVENT"===o[0]){const e=o[2];if(s.has(e.id))console.log("Duplicated event: ",e);else{s.add(e.id),console.log("Received event:",e);const o=(e=>{const s=document.getElementById("event_template").content.cloneNode(!0),o=s.querySelector("li");return o.id=e.id,o.innerHTML=(e=>{if(!e)return"";let s=e.replace(/\n/g,"<br>");return s=s.replace(/(https?:\/\/[^\s]+?\.(jpg|jpeg|png|gif))/g,'<img src="$1" alt="Image">'),s=s.replace(/(https?:\/\/[^\s]+?\.(mp4|webm|ogg))/g,'<video controls><source src="$1" type="video/$2">Your browser does not support the video tag.</video>'),s})(e.content),s})(e);document.getElementById("postlist").appendChild(o)}}else"EOSE"===o[0]&&console.log("End of subscription events.")}}))},"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)})();